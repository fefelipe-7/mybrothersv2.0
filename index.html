<!DOCTYPE html>
<html lang="pt-br">
<head>
  <!-- configuraÃ§Ã£o bÃ¡sica do documento html -->
  <meta charset="UTF-8">
  <title>MyBroters.com</title>
  <!-- link para arquivo de estilos css -->
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <!-- barra superior com informaÃ§Ãµes do usuÃ¡rio logado -->
  <div class="user-info">
    <!-- exibe foto do usuÃ¡rio se existir -->
    {% if user.photo %}
      <img src="uploads/{{ user.photo }}" alt="Foto do usuÃ¡rio">
    {% endif %}
    <!-- exibe nome do usuÃ¡rio -->
    <span>{{ user.name }}</span>
    <!-- formulÃ¡rio para logout (botÃ£o sair) -->
    <form action="/logout" method="POST" style="display: inline;">
      <button type="submit" class="logout-btn">Sair</button>
    </form>
  </div>

  <!-- container principal da pÃ¡gina -->
  <div class="container">
    <!-- tÃ­tulo da aplicaÃ§Ã£o -->
    <h1>ðŸ’¬ My Brothers</h1>

    <!-- formulÃ¡rio para criar novo post -->
    <!-- enctype="multipart/form-data" necessÃ¡rio para upload de arquivos -->
    <form action="/post" method="POST" enctype="multipart/form-data">
      <!-- campo de texto para o post (obrigatÃ³rio) -->
      <textarea name="text" placeholder="O que vocÃª estÃ¡ pensando?" required></textarea>
      <!-- campo para upload de imagem (opcional) -->
      <input type="file" name="image" accept="image/*">
      <!-- botÃ£o para enviar o post -->
      <button type="submit">Postar</button>
    </form>

    <!-- seÃ§Ã£o que exibe todos os posts -->
    <div class="posts">
      <!-- loop que percorre todos os posts -->
      {% for post in posts %}
      <div class="post">
        <!-- cabeÃ§alho do post com informaÃ§Ãµes do autor -->
        <div class="post-header">
          <!-- exibe foto do autor se existir -->
          {% if post.user_photo %}
            <img src="uploads/{{ post.user_photo }}" class="avatar">
          {% endif %}
          <!-- exibe nome do autor -->
          <strong>{{ post.user }}</strong>
          <!-- exibe data e hora do post -->
          <span class="date">{{ post.date }}</span>

          <!-- botÃ£o de apagar (apenas para administradores) -->
          {% if user.is_admin %}
          <form action="/delete_post/{{ loop.index0 }}" method="POST" style="margin-left:auto;">
            <button type="submit" class="delete-btn">Apagar</button>
          </form>
          {% endif %}
        </div>
        <!-- texto do post -->
        <p>{{ post.text }}</p>
        <!-- exibe imagem do post se existir -->
        {% if post.image %}
          <img src="uploads/{{ post.image }}" alt="Imagem do post">
        {% endif %}
      </div>
      {% endfor %}
    </div>
  </div>
</body>
</html>
